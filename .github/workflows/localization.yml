name: Localization Action

on:
  push:
    branches: 
      - 'dev'
    paths:
      - 'brain-marks/Localization/en.lproj/Localizable.strings'

jobs:
  synchronize-with-crowdin:
    runs-on: ubuntu-latest

    steps:

    - name: Checkout
      uses: actions/checkout@v3

    - name: crowdin action
      uses: crowdin/github-action@1.4.14
      with:
        # upload options
        upload_sources: true
        upload_translations: true

        # download options
        download_translations: true

        # Commit message for download translations
        commit_message: "chore: New Crowdin translations by Github Action"

        # Create pull request after pushing to branch
        create_pull_request: true

        # The title of the new pull request
        pull_request_title: "chore: New Crowdin translations to review and merge"

        # To add labels for created pull request
        pull_request_labels: "translations"
  
  
        # global options

        # Specify a path to the configuration file, without / at the beginning'
        config: '.crowdin.yml'

      env:
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        CROWDIN_PROJECT_ID: ${{ secrets.CROWDIN_PROJECT_ID }}
        CROWDIN_PERSONAL_TOKEN: ${{ secrets.CROWDIN_PERSONAL_TOKEN }}
